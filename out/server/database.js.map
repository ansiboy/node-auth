{"version":3,"file":"database.js","sourceRoot":"","sources":["../../src/server/database.ts"],"names":[],"mappings":"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"}